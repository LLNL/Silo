name: Basic

on:
  push:
    branches: ["mcm86-30jul24-gh-actions-ci"]
  pull_request:
    branches: [ "main" ]
    
jobs:
  build:
    runs-on: ubuntu-latest

    steps:
    - uses: actions/checkout@v4
    
    - name: Install HDF5
      run: |
        sudo apt-get update
        sudo apt-get install -y libhdf5-dev
        apt-cache show libhdf5-dev
        rehash
        which h5cc
        h5cc --help

    - name: Build and Check Silo
      run: |
        mkdir build
        cd build
        ../configure --enable-pythonmodule --disable-fortran --prefix=`pwd`/myinstall
        make -j 8 install
        make -j 8 check
